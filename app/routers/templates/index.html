<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link href="/resources/style.css" rel="stylesheet">
    <title>App</title>

    <!-- Google signIn -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>

<div id="app" v-cloak>
<!-- ---------------------------------------------------------------------------------------------------- -->
    <!-- Pasek nawigacyjny -->
<!-- ---------------------------------------------------------------------------------------------------- -->
    <div class="menu forPanel">
        <a href="https://edu-rewolucja.pl" class="brand">edu-rewolucja</a>

        <!-- Gdy user nie jest zalogowany -->
        <div v-if="!isUserAuthenticated" id="authNavi" class="menu right">
            <i v-if="!sc.showLoading" @click="href('SignIn')" id="SignIn">Zaloguj </i>
            <i v-if="!sc.showLoading" @click="href('SignUp')" id="SignUp">Zarejestruj</i>
        </div>

        <!-- Gdy user jest zalogowany -->
        <div v-if="isUserAuthenticated" id="authNavi" class="menu right">
            <i @click="href('Panel')" id="Panel">panel </i>
            <i @click="logout()">wyloguj</i>
            <!-- <img v-bind:src="'/users/picture/'+userData.id" height="40"> ta metoda nie wczytuje zdjęcia za pierwszym razem :/ -->
        </div>
    </div>

    <div class="container"> <!-- otwarcie containera -->
<!-- ---------------------------------------------------------------------------------------------------- -->
    <!-- Kręcące się kółko ładowania -->
<!-- ---------------------------------------------------------------------------------------------------- -->

    <div v-if="showLoading" class="loading">
        <div class="loader"></div>
    </div>

<!-- ---------------------------------------------------------------------------------------------------- -->
    <!-- zarejestruj się screen -->
<!-- ---------------------------------------------------------------------------------------------------- -->

    <div v-if="sc.showSignUp" id="signUp" class="box signup">



        <h1>Załóż konto</h1>

        <br>
        email:<input :value="userData.email" v-on:keyup.enter="signUpFunc()" type="email" id="Remail" >
        <div v-if="val.emailExists" class="redWarning">Użytkownik z tym adresem e-mail już istnieje.
            <i @click="href('SignIn')" class="blueWarning">Zaloguj się</i>
        </div><!-- Błąd emaila 1 -->
        <div v-if="val.notValidREmail" class="redWarning">Nieprawidłowy adres email</div><!-- Błąd emaila 2 -->
        <br><br>
        imie:<input :value="userData.firstname" v-on:keyup.enter="signUpFunc()" type="text" id="Rfirstname">
        <div v-if="val.emptyFieldFirstname" class="redWarning">Puste pole.</div><!-- Błąd pustego pola -->
        <br><br>
        nazwisko:<input :value="userData.lastname" v-on:keyup.enter="signUpFunc()" type="text" id="Rlastname">
        <div v-if="val.emptyFieldLastname" class="redWarning">Puste pole.</div><!-- Błąd pustego pola -->
        <br><br>
        hasło:<input v-on:keyup.enter="signUpFunc()" type="password" id="Rpassword">
        <div v-if="val.passwordTooShort" class="redWarning">Za krótkie hasło</div><!-- Błąd zbyt krótkiego hasła -->
        <br><br>
        <button @click="signUpFunc()" id="signUp" type="submit">Zarejestruj</button>
    </div>

<!-- ---------------------------------------------------------------------------------------------------- -->
    <!-- Kontakt screen -->
<!-- ---------------------------------------------------------------------------------------------------- -->

    <div v-if="sc.showContact" class="box">
        <ul>
            <li>Numer tel: 530 547 713</li>
            <li>email: edurewolucja@gmail.com</li>
        </ul>
    </div>

<!-- ---------------------------------------------------------------------------------------------------- -->
    <!-- Zarejestruj się jako nauczyciel screen -->
<!-- ---------------------------------------------------------------------------------------------------- -->

    <div v-if="sc.showSignUpTutor" id="signUpTutor" class="box">
        <b>Załóż konto nauczyciela:</b> napisz na edurewolucja@gmail.com
    </div>

<!-- ---------------------------------------------------------------------------------------------------- -->
    <!-- Polityka prywatności screen -->
<!-- ---------------------------------------------------------------------------------------------------- -->

    <div v-if="sc.showPrivacyPolicy" class="box">
        <h1>Polityka Prywatności</h1>
        <p>Sed ut et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit</p>
    </div>

<!-- ---------------------------------------------------------------------------------------------------- -->
    <!-- Warunki korzystania z aplikacji screen -->
<!-- ---------------------------------------------------------------------------------------------------- -->

<div v-if="sc.showTermsAndConditions" class="box">
    <h1>Warunki korzystania z aplikacji</h1>
    <p>totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit</p>
</div>

<!-- ---------------------------------------------------------------------------------------------------- -->
    <!-- Footer -->
<!-- ---------------------------------------------------------------------------------------------------- -->

    <div class="footer" id="footer">
        <i class="footerItem" @click="href('SignUpTutor')" id="SignUpTutor">Zostań korepetytorem</i>
        <i class="footerItem" @click="href('Contact')" id="Contact">Kontakt</i>
        <i class="footerItem" @click="href('PrivacyPolicy')" id="PrivacyPolicy">Polityka Prywatności</i>
        <i class="footerItem" @click="href('TermsAndConditions')" id="TermsAndConditions">Watunki korzystania z aplikacji</i>
    </div>

<!-- ---------------------------------------------------------------------------------------------------- -->
    <!-- Panel screen -->
<!-- ---------------------------------------------------------------------------------------------------- -->

    <div v-if="sc.showPanel" id="panel" class="panel">
        Aplikacja - dostęp tylko dla zalogowanych
        <h2> id użytkownika: {{userData.id}} typ: {{userData.account_type}} </h2>
            <div v-for="(post,index) in posts" :key="index">
                <h5> tytuł: {{post.title}} treść: {{post.content}} </h5>
            </div>
    </div>
    
</div> <!-- zamknięcie containera -->
<!-- ---------------------------------------------------------------------------------------------------- -->
</div>

<script>
    // odczytywanie z linku który screen aplikacja ma otworzyć
    // a gdybym w przyszłości zrobił screen który nie ma przycisku który przeniósłby na odpowiedni ->
    // -> screen to zawsze można zrobić ukrytą listę stron i z niej "klikać" 
    window.onhashchange = function(){
        var url = window.location.href
        hash = url.split('#')[1];
        if (hash) {
            // $(".loading").css("display", "none");
            document.getElementById(hash).click();
        } 
    }
</script>

<!-- ---------------------------------------------------------------------------------------------------- -->
    <!-- Importowanie zasobów -->
<!-- ---------------------------------------------------------------------------------------------------- -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://unpkg.com/vue@next"></script>
<script src="resources/utils.js"></script>
<script src="resources/vue.js"></script>

</body>
</html>
